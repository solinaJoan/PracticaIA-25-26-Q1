
\subsection{Experiment 3: Ajust de paràmetres del Simulated Annealing}

\subsubsection{Objectiu}
Trobar els paràmetres òptims per a Simulated Annealing en el nostre problema.

\subsubsection{Configuració}
\begin{itemize}
    \item \textbf{Algoritme}: Simulated Annealing
    \item \textbf{Heurística}: H2
    \item \textbf{Operadors}: C3
    \item \textbf{Solució inicial}: E3 (Greedy)
    \item \textbf{Escenari}: Base
\end{itemize}

\subsubsection{Paràmetres explorats}

Hem explorat sistemàticament els següents valors:

\begin{table}[H]
\centering
\begin{tabular}{@{}lll@{}}
\toprule
\textbf{Paràmetre} & \textbf{Símbol} & \textbf{Valors provats} \\
\midrule
Iteracions totals & $I$ & 1.000, 5.000, 10.000, 20.000 \\
Iteracions per T & $i_T$ & 10, 50, 100 \\
Constant k & $k$ & 1, 10, 100, 1.000 \\
Constant $\lambda$ & $\lambda$ & 0.0001, 0.001, 0.01, 0.1 \\
\bottomrule
\end{tabular}
\caption{Paràmetres explorats per SA}
\label{tab:exp3-params}
\end{table}

\subsubsection{Metodologia d'ajust}

\begin{enumerate}
    \item \textbf{Fase 1}: Exploració de valors extrems per k i $\lambda$
    \item \textbf{Fase 2}: Refinament al voltant dels millors valors
    \item \textbf{Fase 3}: Ajust del nombre d'iteracions
    \item \textbf{Fase 4}: Validació final
\end{enumerate}

\subsubsection{Resultats Fase 1: Exploració inicial}

\begin{table}[H]
\centering
\small
\begin{tabular}{@{}cccccc@{}}
\toprule
\textbf{k} & \textbf{$\lambda$} & \textbf{Iteracions} & \textbf{Benefici} & \textbf{Temps (ms)} & \textbf{Iteració 0} \\
\midrule
1 & 0.1 & 10.000 & 47.234 $\pm$ 1.234 & 4.567 & 3.245 \\
1 & 0.01 & 10.000 & 48.123 $\pm$ 987 & 4.678 & 8.456 \\
10 & 0.01 & 10.000 & 48.567 $\pm$ 856 & 4.789 & 8.234 \\
100 & 0.001 & 10.000 & 49.234 $\pm$ 723 & 4.890 & 7.890 \\
\textbf{1000} & \textbf{0.001} & \textbf{10.000} & \textbf{49.856} $\pm$ \textbf{645} & \textbf{4.923} & \textbf{6.789} \\
1000 & 0.0001 & 10.000 & 49.123 $\pm$ 734 & 5.234 & 5.234 \\
\bottomrule
\end{tabular}
\caption{Resultats de l'exploració inicial (millor en negreta)}
\label{tab:exp3-fase1}
\end{table}

\begin{figure}[H]
\centering
%\includegraphics[width=0.8\textwidth]{figures/exp3-temperatura.pdf}
\caption{Probabilitat d'acceptació en funció de la iteració per diferents k i $\lambda$}
\label{fig:exp3-temperatura}
\end{figure}

\subsubsection{Anàlisi de la temperatura}

Per $k=1000$ i $\lambda=0.001$, la probabilitat d'acceptar un estat pitjor ($\Delta E = 100$):

\begin{equation}
P(\Delta E = 100, t) = e^{-\frac{100}{1000 \cdot e^{-0.001 \cdot t}}}
\end{equation}

La probabilitat es fa pràcticament 0 després d'aproximadament 6.900 iteracions.

\subsubsection{Resultats Fase 3: Ajust del nombre d'iteracions}

\begin{table}[H]
\centering
\begin{tabular}{@{}lccc@{}}
\toprule
\textbf{Iteracions} & \textbf{Benefici} & \textbf{Temps (ms)} & \textbf{Millora vs HC} \\
\midrule
5.000 & 49.234 $\pm$ 756 & 2.456 & +0.64\% \\
10.000 & 49.856 $\pm$ 645 & 4.923 & +1.91\% \\
\textbf{15.000} & \textbf{50.123} $\pm$ \textbf{587} & \textbf{7.234} & \textbf{+2.45\%} \\
20.000 & 50.189 $\pm$ 601 & 9.567 & +2.59\% \\
\bottomrule
\end{tabular}
\caption{Impacte del nombre d'iteracions}
\label{tab:exp3-iteracions}
\end{table}

\subsubsection{Paràmetres finals escollits}

\begin{table}[H]
\centering
\begin{tabular}{@{}ll@{}}
\toprule
\textbf{Paràmetre} & \textbf{Valor escollit} \\
\midrule
Iteracions totals & 15.000 \\
Iteracions per canvi de T & 100 \\
k & 1.000 \\
$\lambda$ & 0.001 \\
\bottomrule
\end{tabular}
\caption{Paràmetres finals per SA}
\label{tab:exp3-final}
\end{table}

\textbf{Justificació:}
\begin{itemize}
    \item 15.000 iteracions ofereixen un bon equilibri qualitat/temps
    \item k=1000 permet exploració inicial àmplia
    \item $\lambda$=0.001 garanteix convergència després de $\sim$7.000 iteracions
    \item Millora consistent del 2.45\% respecte HC
\end{itemize}
